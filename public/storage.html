<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Storage - Gerenciamento de Estoque</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="./images/logoA.png">
    <link rel="shortcut icon" href="./images/logoA.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">
                <img src="./images/logoB.png" alt="logo marca da Tech Storage">
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Início</a></li>
                    <li><a href="products.html">Produtos</a></li>
                    <li><a href="storage.html" class="active">Estoque</a></li>
                    <li><a href="index.html#contact">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="dashboard-header">
            <div class="container">
                <h2>Gerenciamento de Estoque</h2>
                <p>Controle a quantidade e localização dos seus produtos</p>
            </div>
        </section>

        <section class="data-management">
            <div class="container">
                <div class="management-tools">
                    <div class="search-bar">
                        <input type="text" placeholder="Pesquisar no estoque..." id="inventory-search">
                        <button class="search-btn" onclick="searchInventory()">Buscar</button>
                    </div>
                    <button class="btn btn-primary add-btn">+ Atualizar Estoque</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Descrição</th>
                                <th>Quantidade</th>
                                <th>Status</th>
                                <th>Última Atualização</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001</td>
                                <td>Smartphone Galaxy S22</td>
                                <td>42</td>
                                <td><span class="stock in-stock">Em Estoque</span></td>
                                <td>15/04/2025</td>
                                <td class="actions">
                                    <button class="action-btn add">+ Adicionar</button>
                                    <button class="action-btn remove">- Remover</button>
                                </td>
                            </tr>
                            <tr>
                                <td>002</td>
                                <td>Notebook Dell XPS 13</td>
                                <td>8</td>
                                <td><span class="stock low-stock">Estoque Baixo</span></td>
                                <td>12/04/2025</td>
                                <td class="actions">
                                    <button class="action-btn add">+ Adicionar</button>
                                    <button class="action-btn remove">- Remover</button>
                                </td>
                            </tr>
                            <tr>
                                <td>003</td>
                                <td>Smart TV LG 55"</td>
                                <td>15</td>
                                <td><span class="stock in-stock">Em Estoque</span></td>
                                <td>10/04/2025</td>
                                <td class="actions">
                                    <button class="action-btn add">+ Adicionar</button>
                                    <button class="action-btn remove">- Remover</button>
                                </td>
                            </tr>
                            <tr>
                                <td>004</td>
                                <td>Fone de Ouvido Sony WH-1000XM4</td>
                                <td>0</td>
                                <td><span class="stock out-of-stock">Sem Estoque</span></td>
                                <td>05/04/2025</td>
                                <td class="actions">
                                    <button class="action-btn add">+ Adicionar</button>
                                    <button class="action-btn remove" disabled>- Remover</button>
                                </td>
                            </tr>
                            <tr>
                                <td>005</td>
                                <td>iPad Pro 11"</td>
                                <td>23</td>
                                <td><span class="stock in-stock">Em Estoque</span></td>
                                <td>18/04/2025</td>
                                <td class="actions">
                                    <button class="action-btn add">+ Adicionar</button>
                                    <button class="action-btn remove">- Remover</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="pagination">
                    <button class="pagination-btn prev" disabled>Anterior</button>
                    <div class="page-numbers">
                        <button class="page-number active">1</button>
                        <button class="page-number">2</button>
                        <button class="page-number">3</button>
                    </div>
                    <button class="pagination-btn next">Próximo</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3>Tech Storage</h3>
                    <p>Gerenciamento inteligente de estoque</p>
                </div>
                <div class="footer-links">
                    <h4>Links Rápidos</h4>
                    <ul>
                        <li><a href="index.html">Início</a></li>
                        <li><a href="products.html">Produtos</a></li>
                        <li><a href="storage.html">Estoque</a></li>
                        <li><a href="index.html#contact">Contato</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Tech Storage. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Modal para Adicionar Lote no Estoque -->
    <div class="modal-overlay" id="add-stock-modal">
        <div class="modal">
            <div class="modal-header">
                <h3>Atualizar Estoque</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form class="modal-form" id="add-stock-form">
                    <div class="form-group">
                        <label for="stock-product-code">Código do Produto</label>
                        <input type="text" id="stock-product-code" name="cod_prod" placeholder="Ex: XX-XXX-000"
                            required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="stock-quantity">Quantidade</label>
                            <input type="number" id="stock-quantity" name="qtd" min="1" required>
                        </div>

                        <div class="form-group">
                            <label for="stock-date">Data de Entrada</label>
                            <input type="date" id="stock-date" name="entryDate" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="stock-description">Descrição</label>
                        <textarea id="stock-description" name="descricao" placeholder="Detalhes sobre este lote"
                            required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="stock-status">Status</label>
                        <select id="stock-status" name="status" required>
                            <option value="active">Ativo</option>
                            <option value="pending">Pendente</option>
                            <option value="reserved">Reservado</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-cancel">Cancelar</button>
                <button class="btn btn-primary" id="save-stock">Salvar</button>
            </div>
        </div>
    </div>


    <script>
        // Script para controlar o modal de estoque
        document.addEventListener('DOMContentLoaded', function () {
            const addBtn = document.querySelector('.add-btn');
            const modal = document.getElementById('add-stock-modal');
            const closeBtn = modal.querySelector('.modal-close');
            const cancelBtn = modal.querySelector('.modal-cancel');
            const saveBtn = document.getElementById('save-stock');
            const form = document.getElementById('add-stock-form');

            // Definir a data de hoje como padrão
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('stock-date').value = today;

            // Abrir modal
            addBtn.addEventListener('click', function () {
                modal.classList.add('active');
            });

            // Fechar modal
            function closeModal() {
                modal.classList.remove('active');
            }

            closeBtn.addEventListener('click', closeModal);
            cancelBtn.addEventListener('click', closeModal);

            // Fechar modal ao clicar fora dele
            modal.addEventListener('click', function (e) {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // Também adicionar evento para os botões de adicionar nas linhas da tabela
            const addButtons = document.querySelectorAll('.action-btn.add');
            addButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Aqui você poderia preencher o formulário com os dados do produto selecionado
                    // Por exemplo, pegar o código do produto da linha da tabela
                    const row = this.closest('tr');
                    const productId = row.cells[0].textContent;
                    const productName = row.cells[1].textContent;

                    // Preencher o campo de código do produto
                    document.getElementById('stock-product-code').value = productId;

                    // Adicionar o nome do produto ao título do modal para melhor contexto
                    modal.querySelector('.modal-header h3').textContent = `Atualizar Estoque: ${productName}`;

                    modal.classList.add('active');
                });
            });

            // Salvar atualização de estoque
            saveBtn.addEventListener('click', function () {
                // Verificar se o formulário é válido
                if (form.checkValidity()) {
                    // Aqui você adicionaria o código para enviar os dados para o servidor
                    // Por enquanto, apenas fechamos o modal e mostramos uma mensagem
                    alert('Estoque atualizado com sucesso!');
                    closeModal();
                    form.reset();
                    document.getElementById('stock-date').value = today;
                } else {
                    // Trigger form validation
                    form.reportValidity();
                }
            });
        });
    </script>
    <script src="./scripts/storage_script.js"></script>
</body>

</html>